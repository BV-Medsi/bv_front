var se=require("./ScrollbarControllers.css");const e=require("vue"),b=require("@smartmed/ui/tokens"),W=require("@smartmed/utility/functions"),x=require("../_plugin-vue_export-helper-f246444f.js"),O="__smed-scrollbar-wrapper",p=24,U=1e3/15,H=e.defineComponent({__name:"ScrollbarThumb",props:{direction:{default:"vertical"}},setup(w){const u=w,{direction:r}=e.toRefs(u),s=e.ref(null),d=e.inject(O),i=e.inject(b.SCROLLBAR_REF_TOKEN,null),E=e.inject(b.ANIMATION_FRAME_EVENTS_TOKEN),v=e.computed(()=>i&&i.value||document.documentElement),c=e.computed(()=>i&&i.value||window),_=()=>{const t=v.value,{clientHeight:o,scrollHeight:n,clientWidth:l,scrollWidth:a}=t;return o*o/n>p&&r.value==="vertical"||l*l/a>p&&r.value==="horizontal"?0:r.value==="vertical"?p/o:p/l},h=()=>{const t=v.value,{clientHeight:o,scrollHeight:n,clientWidth:l,scrollWidth:a}=t;return r.value==="vertical"?Math.ceil(o/n*100)/100:Math.ceil(l/a*100)/100},L=()=>{const t=v.value,{scrollTop:o,scrollHeight:n,clientHeight:l,scrollLeft:a,scrollWidth:m,clientWidth:k}=t;return r.value==="vertical"?o/(n-l):a/(m-k)},g=()=>{const t=_()||h();return L()*(1-t)},T=()=>{const t=s.value;t&&(u.direction==="vertical"?(t.style.top=`${g()*100}%`,t.style.height=`${h()*100}%`):(t.style.left=`${g()*100}%`,t.style.width=`${h()*100}%`))},z=({clientY:t,clientX:o},n,l)=>{if(!s.value||!d.value)return[0,0];const{offsetHeight:a,offsetWidth:m}=s.value,{top:k,left:F,width:$,height:B}=d.value.getBoundingClientRect(),j=v.value.scrollHeight-B,K=v.value.scrollWidth-$,q=(t-k-a*n)/(B-a),P=(o-F-m*l)/($-m);return[j*q,K*P]};let R=0,y=0;const V=({clientY:t},{top:o,height:n})=>(t-o)/n,A=({clientX:t},{left:o,width:n})=>(t-o)/n,C=()=>{document.removeEventListener("mousemove",f)},f=t=>{const[o,n]=z(t,R,y),l=i&&i.value;if(!l){const{scrollX:a,scrollY:m}=window;window.scrollTo(r.value==="vertical"?a:n,r.value==="vertical"?o:m);return}u.direction==="vertical"?l.scrollTop=o:l.scrollLeft=n},N=t=>{if(t.preventDefault(),t.stopPropagation(),!s.value)return;const o=s.value.getBoundingClientRect();R=V(t,o),y=A(t,o),document.removeEventListener("mousemove",f),document.removeEventListener("mouseup",C),document.addEventListener("mousemove",f),document.addEventListener("mouseup",C)},M=t=>{t.preventDefault();const o=i&&i.value,[n,l]=z(t,.5,.5);if(!o){const{scrollX:a,scrollY:m}=window;window.scrollTo(r.value==="vertical"?a:l,r.value==="vertical"?n:m);return}u.direction==="vertical"?o.scrollTop=n:o.scrollLeft=l},D=()=>{var t,o;c.value.addEventListener("scroll",T),(t=s.value)==null||t.addEventListener("mousedown",N),(o=d.value)==null||o.addEventListener("mousedown",M)};e.onBeforeUnmount(()=>{var t,o;c.value.removeEventListener("scroll",T),(t=s.value)==null||t.removeEventListener("mousedown",N),(o=d.value)==null||o.removeEventListener("mousedown",M),document.removeEventListener("mousemove",f),document.removeEventListener("mouseup",C)});const I=W.useThrottleFn(T,U);return e.watch(E,I,{immediate:!0}),e.watch([d,s],(t,o)=>{t&&o&&D()},{immediate:!0}),(t,o)=>(e.openBlock(),e.createElementBlock("div",{ref_key:"thumbRef",ref:s},null,512))}}),S=e.defineComponent({__name:"ScrollbarWrapper",setup(w){const u=e.ref(null);return e.provide(O,u),(r,s)=>(e.openBlock(),e.createElementBlock("div",{ref_key:"wrapper",ref:u},[e.renderSlot(r.$slots,"default")],512))}}),X={name:"ScrollbarControllers"},Y=e.defineComponent({...X,setup(w){const u=e.inject(b.ANIMATION_FRAME_EVENTS_TOKEN),r=e.inject(b.SCROLLBAR_REF_TOKEN,null),s=e.ref(!1),d=e.ref(!1),i=e.computed(()=>r&&r.value||document.documentElement),E=()=>{const{clientHeight:c,scrollHeight:_,clientWidth:h,scrollWidth:L}=i.value;s.value=Math.ceil(c/_*100)<100,d.value=Math.ceil(h/L*100)<100},v=W.useThrottleFn(E,300);return e.watch(u,v,{immediate:!0}),(c,_)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(c.$style.root)},[e.createVNode(e.Transition,{name:"fade"},{default:e.withCtx(()=>[s.value?(e.openBlock(),e.createBlock(S,{key:0,class:e.normalizeClass([c.$style.bar,c.$style.bar_vertical,d.value&&c.$style.bar_hashorizontal])},{default:e.withCtx(()=>[e.createVNode(H,{direction:"vertical",class:e.normalizeClass(c.$style.thumb)},null,8,["class"])]),_:1},8,["class"])):e.createCommentVNode("",!0)]),_:1}),e.createVNode(e.Transition,{name:"fade"},{default:e.withCtx(()=>[d.value?(e.openBlock(),e.createBlock(S,{key:0,class:e.normalizeClass([c.$style.bar,c.$style.bar_horizontal,s.value&&c.$style.bar_hasvertical])},{default:e.withCtx(()=>[e.createVNode(H,{direction:"horizontal",class:e.normalizeClass(c.$style.thumb)},null,8,["class"])]),_:1},8,["class"])):e.createCommentVNode("",!0)]),_:1})],2))}}),G="_root_bsokn_1",J="_bar_bsokn_17",Q="_bar_vertical_bsokn_23",Z="_bar_horizontal_bsokn_27",ee="_bar_hashorizontal_bsokn_31",te="_bar_hasvertical_bsokn_34",oe="_thumb_bsokn_38",ne={root:G,bar:J,bar_vertical:Q,bar_horizontal:Z,bar_hashorizontal:ee,bar_hasvertical:te,thumb:oe},le={$style:ne},re=x._export_sfc(Y,[["__cssModules",le]]);module.exports=re;
