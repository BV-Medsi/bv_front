var J=require("./Combobox.css");const e=require("vue"),E=require("@smartmed/ui/BaseInput"),F=require("@smartmed/ui/DataList"),O=require("@smartmed/ui/DropdownHost"),z=require("@smartmed/ui/SvgIcon"),K=require("@smartmed/ui/tokens"),p=require("@smartmed/ui/use"),u=require("@smartmed/utility/vue"),A=require("../BaseInput.props-4886ef7a.js"),H=require("../_plugin-vue_export-helper-f246444f.js"),T={...A.BaseInputDefaultProps,items:()=>[],dropdownProps:()=>({})},U={name:"Combobox"},M=e.defineComponent({...U,props:e.mergeDefaults({modelValue:{},modelModifiers:{},type:{},size:{},disabled:{type:Boolean},label:{},description:{},editable:{type:Boolean},maskOptions:{},isError:{type:Boolean},isSuccess:{type:Boolean},placeholder:{},autocomplete:{},name:{},hasCleaner:{type:Boolean},decoratorPostfix:{},decoratorPostfixColorClass:{},inputmode:{},readonly:{type:Boolean},stringify:{type:Function},id:{},dataAutomationId:{},pseudoHovered:{type:Boolean},pseudoFocused:{type:Boolean},inputStyles:{},rightSlotPadding:{},items:{},matcher:{type:Function},itemsFilter:{type:Function},dropdownProps:{}},T),emits:["update:modelValue"],setup(w,{emit:S}){const i=w,{modelValue:l,items:m,isError:V,disabled:b}=e.toRefs(i),f=e.useSlots(),v=p.useControlAccess(null),$=p.useControlInvalid(V),C=p.useControlDisabled(b),n=e.ref(!1),d=e.ref(null),g=e.computed(()=>{var t;return((t=d.value)==null?void 0:t.wrapper)??null});e.provide(K.DROPDOWN_HOST_PIVOT_TOKEN,g);const a=e.computed(()=>m?m.value:[]),_=e.computed(()=>u.hasSlotContent(f.label)),B=e.computed(()=>u.hasSlotContent(f.description)),y=(t,o)=>t?t===o:!0,h=e.computed(()=>{if(!a.value)return null;const t=l.value,o=i.matcher||y,s=a.value.filter(q=>o(t,q));return s.length===1?s[0]:null}),c=e.computed(()=>{if(a.value===null)return null;const t=l.value,o=i.itemsFilter||y;return a.value.filter(s=>o(t,s))}),P=e.computed(()=>l.value!==null&&String(l.value).length>0);e.watch(n,t=>{!t&&v&&v.markAsTouch()}),e.watch(l,()=>{!n.value&&P.value&&!h.value&&k()}),e.watch(h,t=>{t&&r(t)});const k=()=>{n.value=!0},I=()=>{n.value=!1},D=t=>{n.value&&t.preventDefault();const o=c.value;!o||o.length!==1||r(o[0])},r=t=>{S("update:modelValue",t)},N=t=>{var o;I(),(o=d.value)==null||o.focus(),r(t)};return(t,o)=>(e.openBlock(),e.createBlock(e.unref(O),e.mergeProps(t.dropdownProps,{modelValue:n.value,"onUpdate:modelValue":o[1]||(o[1]=s=>n.value=s),class:t.$style.host,"can-open":!e.unref(C),onKeyup:e.withKeys(D,["enter"])}),{dropdown:e.withCtx(()=>[e.renderSlot(t.$slots,"dropdown",{items:c.value},()=>[e.createVNode(e.unref(F),{"model-value":e.unref(l),items:c.value,size:t.size,"onUpdate:modelValue":N},{itemContent:e.withCtx(({item:s})=>[e.renderSlot(t.$slots,"itemContent",{item:s})]),action:e.withCtx(()=>[e.unref(u.hasSlotContent)(t.$slots.actions)?e.renderSlot(t.$slots,"action",{key:0}):e.createCommentVNode("",!0)]),emptyContent:e.withCtx(()=>[e.unref(u.hasSlotContent)(t.$slots.emptyContent)?e.renderSlot(t.$slots,"emptyContent",{key:0}):e.createCommentVNode("",!0)]),_:3},8,["model-value","items","size"])])]),default:e.withCtx(()=>[e.createVNode(e.unref(E),e.mergeProps(t.$props,{ref_key:"baseInputExposed",ref:d,"has-cleaner":"",disabled:e.unref(C),"model-value":e.unref(l),"is-error":e.unref($),stringify:t.stringify,"pseudo-focused":n.value,"onUpdate:modelValue":r,onSearchClear:o[0]||(o[0]=s=>r(null))}),{left:e.withCtx(()=>[e.unref(u.hasSlotContent)(t.$slots.left)?e.renderSlot(t.$slots,"left",{key:0}):e.createCommentVNode("",!0)]),right:e.withCtx(()=>[e.createVNode(e.unref(z),{name:"arrow-down",class:e.normalizeClass([t.$style.icon,n.value&&t.$style.icon_rotated])},null,8,["class"])]),valueContent:e.withCtx(()=>[t.$slots.valueContent?e.renderSlot(t.$slots,"valueContent",{key:0,value:e.unref(l)}):e.createCommentVNode("",!0)]),label:e.withCtx(()=>[_.value?e.renderSlot(t.$slots,"label",{key:0}):e.createCommentVNode("",!0)]),description:e.withCtx(()=>[B.value?e.renderSlot(t.$slots,"description",{key:0}):e.createCommentVNode("",!0)]),_:3},16,["disabled","model-value","is-error","stringify","pseudo-focused"])]),_:3},16,["modelValue","class","can-open","onKeyup"]))}}),x="_host_1uywm_1",L="_icon_1uywm_5",R="_icon_rotated_1uywm_10",W={host:x,icon:L,icon_rotated:R},j={$style:W},G=H._export_sfc(M,[["__cssModules",j]]);module.exports=G;
