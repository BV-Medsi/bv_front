var Q=require("./Popup.css");const e=require("vue"),B=require("@smartmed/ui/Portal"),V=require("@smartmed/ui/SvgIcon"),d=require("@smartmed/ui/tokens"),E=require("@smartmed/ui/use"),y=require("@smartmed/utility/directives"),P=require("../scrollbarTokens-475d4523.js"),g=require("../_plugin-vue_export-helper-f246444f.js"),z={modelValue:!1,size:"md",dismissible:!0,closable:!0,title:""},N={name:"Popup"},O=e.defineComponent({...N,props:e.mergeDefaults({modelValue:{type:Boolean},size:{},dismissible:{type:Boolean},closable:{type:Boolean},title:{}},z),emits:["update:modelValue"],setup(v,{emit:k}){const h=v,{modelValue:n,dismissible:c,size:a}=e.toRefs(h),p=e.inject(d.POPUPS_HOST_TOKEN),r=Symbol(),i=e.inject(d.IS_POPUP_MOBILE_TOKEN,e.ref(!1)),_=e.ref(null),f=E.useOverscroll("all",o=>o);e.provide(P.SCROLLBAR_REF_TOKEN,f),p.value.registerPopup(r);const u=e.ref(n.value),b=e.computed(()=>a.value==="full"),l=()=>{k("update:modelValue",!1)};e.watch(n,o=>{p.value.setOpen(r,o)},{immediate:!0}),e.onBeforeUnmount(()=>{p.value.remove(r)});const C=(o,t,s)=>{if(!c.value)return;const m=o.target;t&&!t.contains(m)&&s&&!s.contains(m)&&l()},$=()=>{c.value&&l()},w=()=>{u.value=!1};return e.watch(n,o=>{o&&(u.value=o)},{immediate:!0}),e.watch(_,o=>{o&&o.focus()},{immediate:!0}),(o,t)=>u.value?(e.openBlock(),e.createBlock(e.unref(B),{key:0,"append-to":"#smed_popups-host"},{default:e.withCtx(()=>[e.createVNode(e.Transition,{name:e.unref(i)?"smed-mobile-popup":"fade",onAfterLeave:w},{default:e.withCtx(()=>[e.unref(n)?e.withDirectives((e.openBlock(),e.createElementBlock("section",{key:0,ref_key:"popupRef",ref:f,"aria-modal":"true",role:"dialog",class:e.normalizeClass(o.$style.wrapper),onClick:t[2]||(t[2]=s=>C(s,o.$refs.content,o.$refs.sticky))},[e.createElementVNode("div",{class:e.normalizeClass([o.$style.popup,o.$style["popup_"+e.unref(a)],e.unref(i)&&o.$style.popup_mobile])},[e.createElementVNode("div",{ref_key:"content",ref:_,class:e.normalizeClass([o.$style.content,e.unref(i)&&o.$style.content_mobile,b.value&&o.$style.content_full])},[o.title?(e.openBlock(),e.createElementBlock("h5",{key:0,class:e.normalizeClass(o.$style.title)},e.toDisplayString(o.title),3)):e.createCommentVNode("",!0),e.renderSlot(o.$slots,"default",{close:l})],2),o.closable?(e.openBlock(),e.createElementBlock("div",{key:0,ref:"sticky",class:e.normalizeClass(o.$style.sticky)},[e.createVNode(e.unref(V),{tabindex:"0",name:"close-black",size:"xl",class:e.normalizeClass(o.$style.close),onClick:t[0]||(t[0]=e.withModifiers(s=>l(),["prevent"])),onKeydown:t[1]||(t[1]=e.withKeys(e.withModifiers(s=>l(),["stop","prevent"]),["enter"]))},null,8,["class"])],2)):e.createCommentVNode("",!0)],2)],2)),[[e.unref(y.EscDirective),{onEvent:$}],[e.unref(y.FocustrapDirective)]]):e.createCommentVNode("",!0)]),_:3},8,["name"])]),_:3})):e.createCommentVNode("",!0)}}),q="_wrapper_134hf_1",S="_popup_134hf_15",D="_popup_sm_134hf_24",M="_popup_md_134hf_27",T="_popup_lg_134hf_30",K="_popup_full_134hf_33",L="_popup_mobile_134hf_40",R="_content_134hf_59",F="_content_full_134hf_64",I="_content_mobile_134hf_70",U="_sticky_134hf_74",j="_close_134hf_81",A="_title_134hf_94",H={wrapper:q,popup:S,popup_sm:D,popup_md:M,popup_lg:T,popup_full:K,popup_mobile:L,content:R,content_full:F,content_mobile:I,sticky:U,close:j,title:A},W={$style:H},G=g._export_sfc(O,[["__cssModules",W]]);module.exports=G;
