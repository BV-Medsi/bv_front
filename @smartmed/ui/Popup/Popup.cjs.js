var J=require("./Popup.css");const e=require("vue"),B=require("@smartmed/ui/Portal"),V=require("@smartmed/ui/SvgIcon"),c=require("@smartmed/ui/tokens"),E=require("@smartmed/ui/use"),y=require("@smartmed/utility/directives"),P=require("../_plugin-vue_export-helper-f246444f.js"),g={modelValue:!1,size:"md",dismissible:!0,closable:!0,title:""},z={name:"Popup"},N=e.defineComponent({...z,props:e.mergeDefaults({modelValue:{type:Boolean},size:{},dismissible:{type:Boolean},closable:{type:Boolean},title:{}},g),emits:["update:modelValue"],setup(v,{emit:k}){const h=v,{modelValue:n,dismissible:a,size:_}=e.toRefs(h),p=e.inject(c.POPUPS_HOST_TOKEN),r=Symbol(),i=e.inject(c.IS_POPUP_MOBILE_TOKEN,e.ref(!1)),f=e.ref(null),m=E.useOverscroll("all",o=>o);e.provide(c.SCROLLBAR_REF_TOKEN,m),p.value.registerPopup(r);const u=e.ref(n.value),C=e.computed(()=>_.value==="full"),l=()=>{k("update:modelValue",!1)};e.watch(n,o=>{p.value.setOpen(r,o)},{immediate:!0}),e.onBeforeUnmount(()=>{p.value.remove(r)});const b=(o,t,s)=>{if(!a.value)return;const d=o.target;t&&!t.contains(d)&&s&&!s.contains(d)&&l()},$=()=>{a.value&&l()},w=()=>{u.value=!1};return e.watch(n,o=>{o&&(u.value=o)},{immediate:!0}),e.watch(f,o=>{o&&o.focus()},{immediate:!0}),(o,t)=>u.value?(e.openBlock(),e.createBlock(e.unref(B),{key:0,"append-to":"#smed_popups-host"},{default:e.withCtx(()=>[e.createVNode(e.Transition,{name:e.unref(i)?"smed-mobile-popup":"fade",onAfterLeave:w},{default:e.withCtx(()=>[e.unref(n)?e.withDirectives((e.openBlock(),e.createElementBlock("section",{key:0,ref_key:"popupRef",ref:m,"aria-modal":"true",role:"dialog",class:e.normalizeClass(o.$style.wrapper),onClick:t[2]||(t[2]=s=>b(s,o.$refs.content,o.$refs.sticky))},[e.createElementVNode("div",{class:e.normalizeClass([o.$style.popup,o.$style["popup_"+e.unref(_)],e.unref(i)&&o.$style.popup_mobile])},[e.createElementVNode("div",{ref_key:"content",ref:f,class:e.normalizeClass([o.$style.content,e.unref(i)&&o.$style.content_mobile,C.value&&o.$style.content_full])},[o.title?(e.openBlock(),e.createElementBlock("h5",{key:0,class:e.normalizeClass(o.$style.title)},e.toDisplayString(o.title),3)):e.createCommentVNode("",!0),e.renderSlot(o.$slots,"default",{close:l})],2),o.closable?(e.openBlock(),e.createElementBlock("div",{key:0,ref:"sticky",class:e.normalizeClass(o.$style.sticky)},[e.createVNode(e.unref(V),{tabindex:"0",name:"close-black",size:"xl",class:e.normalizeClass(o.$style.close),onClick:t[0]||(t[0]=e.withModifiers(s=>l(),["prevent"])),onKeydown:t[1]||(t[1]=e.withKeys(e.withModifiers(s=>l(),["stop","prevent"]),["enter"]))},null,8,["class"])],2)):e.createCommentVNode("",!0)],2)],2)),[[e.unref(y.EscDirective),{onEvent:$}],[e.unref(y.FocustrapDirective)]]):e.createCommentVNode("",!0)]),_:3},8,["name"])]),_:3})):e.createCommentVNode("",!0)}}),O="_wrapper_134hf_1",S="_popup_134hf_15",q="_popup_sm_134hf_24",D="_popup_md_134hf_27",M="_popup_lg_134hf_30",K="_popup_full_134hf_33",L="_popup_mobile_134hf_40",R="_content_134hf_59",T="_content_full_134hf_64",F="_content_mobile_134hf_70",I="_sticky_134hf_74",U="_close_134hf_81",j="_title_134hf_94",A={wrapper:O,popup:S,popup_sm:q,popup_md:D,popup_lg:M,popup_full:K,popup_mobile:L,content:R,content_full:T,content_mobile:F,sticky:I,close:U,title:j},H={$style:A},W=P._export_sfc(N,[["__cssModules",H]]);module.exports=W;
