var ae=require("./InputDate.css");const e=require("vue"),z=require("@maskito/kit"),F=require("@smartmed/ui/BaseInput"),H=require("@smartmed/ui/Calendar"),R=require("@smartmed/ui/CalendarMobile"),$=require("@smartmed/ui/DropdownHost"),L=require("@smartmed/ui/Popup"),U=require("@smartmed/ui/SvgIcon"),y=require("@smartmed/ui/tokens"),m=require("@smartmed/ui/use"),t=require("@smartmed/utility/date"),_=require("../hasSlotContent-34be92f3.js"),j=require("../BaseInput.props-4886ef7a.js"),G=require("../_plugin-vue_export-helper-f246444f.js"),K={...j.BaseInputDefaultProps,hasCleaner:!0,inputmode:"numeric",placeholder:t.DATE_POSTFIX_DECORATOR,dropdownProps:()=>({}),calendarProps:()=>({}),min:()=>t.SMED_FIRST_DAY,max:()=>t.SMED_LAST_DAY,disabledDatesHandler:()=>!1},X=e.defineComponent({name:"InputDate",__name:"InputDate",props:e.mergeDefaults({modelValue:{},modelModifiers:{},type:{},size:{},disabled:{type:Boolean},label:{},description:{},editable:{type:Boolean},isError:{type:Boolean},isSuccess:{type:Boolean},placeholder:{},autocomplete:{},name:{},hasCleaner:{type:Boolean},decoratorPostfix:{},decoratorPostfixColorClass:{},inputmode:{},readonly:{type:Boolean},stringify:{type:Function},id:{},dataAutomationId:{},pseudoHovered:{type:Boolean},pseudoFocused:{type:Boolean},inputStyles:{},rightSlotPadding:{},max:{},min:{},disabledDatesHandler:{type:Function},dropdownProps:{},calendarProps:{}},K),emits:["update:modelValue"],setup(b,{emit:s}){const f=b,{modelValue:u,disabled:P,isError:V,max:i,min:c}=e.toRefs(f),r=e.inject(y.IS_POPUP_MOBILE_TOKEN,e.ref(!1)),l=e.ref(!1),v=e.ref(null),S=e.computed(()=>{var o;return((o=v.value)==null?void 0:o.wrapper)??null}),p=o=>(o==null?void 0:o.toString())||"",d=e.ref(p(u.value)),n=e.ref(!1);e.provide(y.DROPDOWN_HOST_PIVOT_TOKEN,S);const C=e.useSlots(),h=m.useControlAccess(null),I=m.useControlInvalid(V),D=m.useControlDisabled(P),g=e.computed(()=>_.hasSlotContent(C.label)),k=e.computed(()=>_.hasSlotContent(C.description)),w=e.computed(()=>{const o=i.value.toLocalNativeDate(),a=c.value.toLocalNativeDate();return z.maskitoDateOptionsGenerator({mode:"dd/mm/yyyy",separator:".",max:o,min:a})}),x=e.computed(()=>{const o=d.value;return t.DATE_POSTFIX_DECORATOR.slice(o.length)}),E=o=>{r.value||(l.value=o)},O=o=>{n.value=!1,!(o instanceof t.SmedDayRange)&&s("update:modelValue",o)},B=()=>{n.value=!1},T=o=>{s("update:modelValue",o),l.value=!1},q=o=>{const a=o;if(d.value=a,!a){s("update:modelValue",null);return}a.length===t.DATE_FILTER_LENGTH&&s("update:modelValue",t.SmedDay.normalizeParse(a))},N=()=>{s("update:modelValue",null),l.value=!0},A=o=>{r.value&&(o.stopPropagation(),o.preventDefault(),n.value=!n.value)};return e.watch(l,o=>{!o&&h&&h.markAsTouch()}),e.watch(u,o=>{p(o)===d.value||(d.value=p(o))}),(o,a)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(o.$style.host)},[e.createVNode(e.unref($),e.mergeProps(o.dropdownProps,{"model-value":l.value,class:o.$style.host,"max-width":266,"min-width":266,"min-height":318,"can-open":!e.unref(r)&&!e.unref(D),"onUpdate:modelValue":E}),{dropdown:e.withCtx(()=>[e.createVNode(e.unref(H),e.mergeProps(o.calendarProps,{"show-adjacent-days":"",max:e.unref(i),min:e.unref(c),value:e.unref(u),"disabled-dates-handler":o.disabledDatesHandler,onDayClick:T}),null,16,["max","min","value","disabled-dates-handler"])]),default:e.withCtx(()=>[e.createVNode(e.unref(F),e.mergeProps(f,{ref_key:"baseInputExposed",ref:v,disabled:e.unref(D),"model-value":d.value,"is-error":e.unref(I),"pseudo-focused":!e.unref(r)&&l.value,"mask-options":w.value,"decorator-postfix":x.value,"decorator-postfix-color-class":o.$style.decorator,onSearchClear:N,"onUpdate:modelValue":q}),{right:e.withCtx(()=>[e.createVNode(e.unref(U),{name:"calendar",class:e.normalizeClass(o.$style.icon),size:o.size==="sm"?"md":"lg",onClick:A},null,8,["class","size"])]),label:e.withCtx(()=>[g.value?e.renderSlot(o.$slots,"label",{key:0}):e.createCommentVNode("",!0)]),description:e.withCtx(()=>[k.value?e.renderSlot(o.$slots,"description",{key:0}):e.createCommentVNode("",!0)]),_:3},16,["disabled","model-value","is-error","pseudo-focused","mask-options","decorator-postfix","decorator-postfix-color-class"])]),_:3},16,["model-value","class","can-open"]),e.unref(r)?(e.openBlock(),e.createBlock(e.unref(L),{key:0,modelValue:n.value,"onUpdate:modelValue":a[0]||(a[0]=M=>n.value=M),size:"full",closable:!1},{default:e.withCtx(()=>[e.createVNode(e.unref(R),{"actions-fixed":"",single:"",value:e.unref(u),class:e.normalizeClass(o.$style.calendar),min:e.unref(c),max:e.unref(i),"disabled-dates-handler":o.disabledDatesHandler,onConfirm:O,onCancel:B},null,8,["value","class","min","max","disabled-dates-handler"])]),_:1},8,["modelValue"])):e.createCommentVNode("",!0)],2))}}),Y="_host_1ltla_1",W="_icon_1ltla_5",J="_decorator_1ltla_13",Q="_calendar_1ltla_17",Z={host:Y,icon:W,decorator:J,calendar:Q},ee={$style:Z},oe=G._export_sfc(X,[["__cssModules",ee]]);module.exports=oe;
