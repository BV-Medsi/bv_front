"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const r=require("vue"),v=require("../ActiveElement.token-604bd457.js");function m(){}function i(e){return e.composedPath()[0]}function d(e){return"getRootNode"in e&&e.isConnected?e.getRootNode():e.ownerDocument}function a(e){return d(e).activeElement!==e&&!e.matches(":disabled")}const n=r.ref(null);let o=null;const s=()=>{o==null||o.removeEventListener("focusin",l),o==null||o.removeEventListener("focusout",c)},c=e=>{s();const t=i(e);a(t)&&(n.value=e.relatedTarget)},f=e=>{const t=e.target;n.value=t},E=e=>{const{relatedTarget:t,target:u}=e;t&&a(u)&&(n.value=t)},w=e=>{e.addEventListener("focusin",f),e.addEventListener("focusout",E),o=e},l=e=>{s();const t=i(e),u=d(t);u===document?n.value=t:(n.value=t,w(u))},L=()=>{s();const e=document.activeElement;e!=null&&e.matches("iframe")||(n.value=e)},g=e=>{const t=()=>{n.value=e,window.removeEventListener("focusout",t)};window.addEventListener("focusout",t),setTimeout(()=>{window.removeEventListener("focusout",t)},0)},T=e=>{s(),window.removeEventListener("focusout",c);const t=i(e);!document.activeElement||document.activeElement===document.body?n.value=t:g(t)},A=()=>{window.addEventListener("focusout",c)},b=e=>{document.body.onclick=m,window.addEventListener("focusout",c),window.addEventListener("focusin",l),window.addEventListener("blur",L),window.addEventListener("mousedown",T),window.addEventListener("mouseup",A),e.provide(v.ACTIVE_ELEMENT_TOKEN,r.readonly(n))},p={install:b};exports.ActiveElementPlugin=p;
