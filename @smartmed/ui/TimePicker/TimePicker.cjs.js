var ie=require("./TimePicker.css");const t=require("vue"),y=require("@smartmed/ui/Scrollbar"),f=require("@smartmed/utility/date"),A=require("@smartmed/utility/functions"),F=require("../_plugin-vue_export-helper-f246444f.js"),O=new Array(f.HOURS_IN_DAY).fill("").map((_,l)=>l),U=new Array(f.MINUTES_IN_HOUR).fill("").map((_,l)=>l),R=new Array(f.SECONDS_IN_MINUTE).fill("").map((_,l)=>l),G={mode:"HH:MM"},W=["onClick"],Y=["onClick"],j=["onClick"],I=30,J=t.defineComponent({name:"TimePicker",__name:"TimePicker",props:t.mergeDefaults({modelValue:{},mode:{}},G),emits:["update:modelValue"],setup(_,{emit:l}){var w,N,z,T;const m=_,g=O,L=U,P=R,{mode:S,modelValue:D}=t.toRefs(m),C=t.ref(null),E=t.ref(null),$=t.ref(null),i=t.ref(((w=m.modelValue)==null?void 0:w.hours)||0),r=t.ref(((N=m.modelValue)==null?void 0:N.minutes)||0),a=t.ref(((z=m.modelValue)==null?void 0:z.seconds)||0),B=t.ref(((T=m.modelValue)==null?void 0:T.ms)||0),h=t.computed(()=>{var e;return((e=C.value)==null?void 0:e.native)||null}),k=t.computed(()=>{var e;return((e=E.value)==null?void 0:e.native)||null}),p=t.computed(()=>{var e;return((e=$.value)==null?void 0:e.native)||null}),d=t.computed(()=>S.value==="HH:MM:SS"||S.value==="HH:MM:SS.MSS"),c=(e,o,s=!0)=>{e.scrollTo({top:o*I,behavior:s?"smooth":void 0})},q=e=>{const o=e.target,s=Math.round(o.scrollTop/I);c(o,s),o===h.value&&(i.value=s),o===k.value&&(r.value=s),o===p.value&&(a.value=s)},u=A.useDebounceFn(q,300);t.watch(h,(e,o,s)=>{e&&c(e,i.value,!1),e==null||e.addEventListener("scroll",u),s(()=>{e==null||e.removeEventListener("scroll",u)})},{immediate:!0}),t.watch(k,(e,o,s)=>{e&&c(e,r.value,!1),e==null||e.addEventListener("scroll",u),s(()=>{e==null||e.removeEventListener("scroll",u)})},{immediate:!0}),t.watch(p,(e,o,s)=>{e&&c(e,a.value,!1),e==null||e.addEventListener("scroll",u),s(()=>{e==null||e.removeEventListener("scroll",u)})},{immediate:!0}),t.watch([i,r,a,B],([e,o,s,n])=>{l("update:modelValue",new f.SmedTime(e,o,s,n))});const M=e=>{i.value=e;const o=h.value;o&&c(o,e)},V=e=>{r.value=e;const o=k.value;o&&c(o,e)},H=e=>{a.value=e;const o=p.value;o&&c(o,e)};return t.watch(D,e=>{const o=(e==null?void 0:e.hours)||0,s=(e==null?void 0:e.minutes)||0,n=(e==null?void 0:e.seconds)||0,v=(e==null?void 0:e.ms)||0;o!==i.value&&M(o),s!==r.value&&V(s),n!==a.value&&H(n),B.value=v},{immediate:!0}),(e,o)=>(t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(e.$style.timePicker),style:t.normalizeStyle({maxWidth:`${d.value?300:200}px`})},[t.createVNode(t.unref(y),{ref_key:"hoursScrollbar",ref:C,class:t.normalizeClass(e.$style.scrollbar)},{default:t.withCtx(()=>[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(t.unref(g),(s,n)=>(t.openBlock(),t.createElementBlock("div",{key:n,class:t.normalizeClass([e.$style.item,i.value===s&&e.$style.item_active]),onClick:v=>M(s)},t.toDisplayString(s),11,W))),128))]),_:1},8,["class"]),t.createVNode(t.unref(y),{ref_key:"minutesScrollbar",ref:E,class:t.normalizeClass(e.$style.scrollbar)},{default:t.withCtx(()=>[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(t.unref(L),(s,n)=>(t.openBlock(),t.createElementBlock("div",{key:n,class:t.normalizeClass([e.$style.item,r.value===s&&e.$style.item_active]),onClick:v=>V(s)},t.toDisplayString(s),11,Y))),128))]),_:1},8,["class"]),d.value?(t.openBlock(),t.createBlock(t.unref(y),{key:0,ref_key:"secondsScrollbar",ref:$,class:t.normalizeClass(e.$style.scrollbar)},{default:t.withCtx(()=>[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(t.unref(P),(s,n)=>(t.openBlock(),t.createElementBlock("div",{key:n,class:t.normalizeClass([e.$style.item,a.value===s&&e.$style.item_active]),onClick:v=>H(s)},t.toDisplayString(s),11,j))),128))]),_:1},8,["class"])):t.createCommentVNode("",!0),t.createElementVNode("div",{class:t.normalizeClass(e.$style.selector)},[t.createElementVNode("div",{class:t.normalizeClass([e.$style.hours,!d.value&&e.$style.hours_short])},"ч",2),t.createElementVNode("div",{class:t.normalizeClass([e.$style.minutes,!d.value&&e.$style.minutes_short])}," мин ",2),d.value?(t.openBlock(),t.createElementBlock("div",{key:0,class:t.normalizeClass(e.$style.seconds)},"сек",2)):t.createCommentVNode("",!0)],2)],6))}}),K="_timePicker_1hb3l_1",Q="_scrollbar_1hb3l_8",X="_item_1hb3l_15",Z="_item_active_1hb3l_27",b="_selector_1hb3l_31",x="_hours_1hb3l_45",ee="_minutes_1hb3l_46",te="_seconds_1hb3l_47",se="_hours_short_1hb3l_57",oe="_minutes_short_1hb3l_65",ne={timePicker:K,scrollbar:Q,item:X,item_active:Z,selector:b,hours:x,minutes:ee,seconds:te,hours_short:se,minutes_short:oe},le={$style:ne},ce=F._export_sfc(J,[["__cssModules",le]]);module.exports=ce;
