var ot=require("./Tooltip.css");const t=require("vue"),$=require("@smartmed/ui/ActiveZone"),q=require("@smartmed/ui/Portal"),F=require("@smartmed/ui/tokens"),D=require("@smartmed/utility/directives"),N=require("../_plugin-vue_export-helper-f246444f.js"),V={direction:"bottom-right"},o=4,L=7,E=L*5,M={"top-left":"bottom-left","top-right":"bottom-right","bottom-left":"top-left","bottom-right":"top-right",left:"right",right:"left","top-middle":"bottom-middle","bottom-middle":"top-middle"},W={"top-left":"top-right","top-right":"top-left","bottom-left":"bottom-right","bottom-right":"bottom-left",left:"right",right:"left","top-middle":"top-middle","bottom-middle":"bottom-middle"};function Z(i,d,n,g){let s=g;const _=i.top+i.height/2-d.height/2-n.top,u=i.left-d.width-o-n.left,h=i.left+i.width+o-n.left,c=i.bottom+o-n.top,f=i.top-d.height-o-n.top,m=i.left+i.width/2-E-n.left,p=i.left+i.width/2-d.width+E-n.left,v=i.left-d.width/2+i.width/2-n.left,a=["left","right","bottom-left","bottom-right","bottom-middle","top-left","top-right","top-middle"];a.splice(a.indexOf(s),1);let l=0,r=0;for(;a.length;){switch(s){case"left":l=_,r=u-o*2;break;case"right":l=_,r=h+o*2;break;case"top-right":l=f-o*2,r=m;break;case"top-left":l=f-o*2,r=p;break;case"bottom-right":l=c+o*2,r=m;break;case"bottom-left":l=c+o*2,r=p;break;case"bottom-middle":l=c+o*2,r=v;break;case"top-middle":l=f-o*2,r=v;break}const b=l+n.top>o&&l+d.height+o+n.top<window.innerHeight,H=r>o&&r+d.width+o+n.left<n.width;if(a.length===0||b&&H)break;s=b?W[s]:M[s],s=a.splice(a.indexOf(s),1)[0]||g}return{left:r,top:l,direction:s}}const Y=["aria-describedby"],j={name:"Tooltip"},K=t.defineComponent({...j,props:t.mergeDefaults({direction:{},describedBy:{}},V),setup(i){const d=i,n=500,g=200,{direction:s}=t.toRefs(d),_=t.inject(F.HINT_HOST_TOKEN),u=t.ref(null),h=t.ref(null),c=t.ref(!1),f=t.ref(null),m=t.ref(null),p=t.ref(s.value),v=t.ref({left:0,top:0}),a={id:null},l=()=>_?_.value.getBoundingClientRect():{left:0,top:document.body.clientHeight,width:document.body.clientWidth},r=e=>{e?(x(),T()):(w(),y())},b=e=>{e?(x(),T()):(w(),y())},H=e=>{c.value&&(e?T():(w(),y()))},x=()=>{c.value||(u.value=setTimeout(()=>{c.value=!0,u.value=null},n))},w=()=>{u.value&&(clearTimeout(u.value),u.value=null)},y=()=>{c.value&&(h.value=setTimeout(()=>{c.value=!1,h.value=null},g))},T=()=>{h.value&&(clearTimeout(h.value),h.value=null)},A=t.computed(()=>{const{left:e,top:k}=v.value;return{left:`${e}px`,top:`${k}px`}});t.onBeforeUnmount(()=>{w(),T(),C()});const S=()=>{if(!f.value||!m.value)return;const e=f.value.getBoundingClientRect(),k=m.value.getBoundingClientRect(),O=l(),{direction:P,left:z,top:I}=Z(e,k,O,s.value);v.value={left:z,top:I},p.value=P},B=()=>{const e=()=>{S(),a.id=requestAnimationFrame(e)};a.id=requestAnimationFrame(e)},C=()=>{a.id&&cancelAnimationFrame(a.id)};return t.watch(c,e=>{e?B():C()}),(e,k)=>t.withDirectives((t.openBlock(),t.createBlock(t.unref($),{class:t.normalizeClass(e.$style.host),onActiveZoneChanged:r},{default:t.withCtx(()=>[t.createElementVNode("div",{ref_key:"host",ref:f,class:t.normalizeClass(e.$style.container)},[t.renderSlot(e.$slots,"default")],2),t.createVNode(t.unref(q),{"append-to":"#smed_hints-host"},{default:t.withCtx(()=>[t.createVNode(t.Transition,{name:"fade"},{default:t.withCtx(()=>[c.value?t.withDirectives((t.openBlock(),t.createElementBlock("div",{key:0,ref_key:"hint",ref:m,class:t.normalizeClass([e.$style.hint,e.$style["hint_"+p.value]]),"aria-describedby":e.describedBy,style:t.normalizeStyle(A.value)},[t.renderSlot(e.$slots,"hint")],14,Y)),[[t.unref(D.HoveredDirective),{onEvent:H}]]):t.createCommentVNode("",!0)]),_:3})]),_:3})]),_:3},8,["class"])),[[t.unref(D.HoveredDirective),{onEvent:b}]])}}),U="_host_1n1x8_1",G="_container_1n1x8_6",J="_hint_1n1x8_10",Q="_hint_left_1n1x8_27",X="_hint_right_1n1x8_32",R={host:U,container:G,hint:J,hint_left:Q,hint_right:X,"hint_bottom-left":"_hint_bottom-left_1n1x8_37","hint_bottom-right":"_hint_bottom-right_1n1x8_41","hint_bottom-middle":"_hint_bottom-middle_1n1x8_45","hint_top-left":"_hint_top-left_1n1x8_50","hint_top-right":"_hint_top-right_1n1x8_55","hint_top-middle":"_hint_top-middle_1n1x8_60"},tt={$style:R},et=N._export_sfc(K,[["__cssModules",tt]]);module.exports=et;
