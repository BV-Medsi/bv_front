"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const g=require("@smartmed/ui/tokens");require("@maskito/core");require("../inputPhoneInternational.mask-94723b98.js");const r=require("vue");let N=0;function I(){return`smed-element_${N++}_${Date.now()}`}function E(e){return typeof e=="function"?r.computed(e):r.ref(e)}function k(e){r.getCurrentScope()&&r.onBeforeUnmount(e)}function j(e){const n=r.inject(g.ALERTS_HOST_TOKEN,null);r.inject(g.ALERTS_OPTIONS_TOKEN,null)===null&&console.warn("[useAlerts] Необходимо добавить AlertsPlugin в main.ts");const t=[],i=(l,s)=>{var m;const v=I();return n&&((m=n.value)==null||m.show(v,l,s)),e!=null&&e.autoCloseOnUnmount&&t.push(v),v},c=l=>{var s;if(!l){f();return}n&&((s=n.value)==null||s.close(l))},f=()=>{var l;n&&((l=n.value)==null||l.closeLast())};return k(()=>{t.forEach(c)}),{show:i,close:c,closeLast:f}}const b="__SmartMed_CONTROL_ACCESSOR_TOKEN";function M(e=void 0){return e!==void 0&&r.provide(b,e),r.inject(b,null)}function B(e=!1){const n=M(),o=E(e),t=n?E(n.disabled):r.ref(!1);return r.computed(()=>o.value||t.value)}function H(e=!1){const n=M(),o=E(e),t=n?E(n.invalid):r.ref(!1);return r.computed(()=>o.value||t.value)}function U(){const e=M(),n=r.ref(null),o=r.ref(!1),t=()=>{o.value=!0},i=()=>{o.value=!1,e==null||e.markAsTouch()},c=r.computed(()=>n.value?n.value:null);r.onMounted(()=>{const s=c.value;s&&typeof s.addEventListener=="function"&&(s.addEventListener("focus",t),s.addEventListener("blur",i))}),r.onBeforeUnmount(()=>{const s=c.value;s&&typeof s.removeEventListener=="function"&&(s.removeEventListener("focus",t),s.removeEventListener("blur",i))});const f=()=>{c.value&&c.value.focus()},l=()=>{c.value&&c.value.blur()};return{native:n,focused:o,id:I(),focus:f,blur:l}}const W=e=>{const n=new Map,o=Object.keys(e);for(let t=0;t<o.length+1;t++)t===0?n.set([-1/0,e[o[t]]],o[t]):t!==o.length?n.set([e[o[t-1]],e[o[t]]],o[t]):n.set([e[o[t-1]],1/0],"largerThenDefined");return n},Y=(e,n,o)=>n<e&&e<=o,K=(e,n)=>{const o=e.keys(),t=Array.from(o);for(let i=0;i<t.length;i++){const c=t[i];if(Y(n,c[0],c[1]))return e.get(c)||null}return null};function X(){const e=r.inject(g.MEDIA_WINDOW_WIDTH_TOKEN),n=r.inject(g.MEDIA_BREAKPOINTS,{}),o=W(n),t=r.computed(()=>(e==null?void 0:e.value)||window.innerWidth);return{media:r.computed(()=>{const l=t.value;return K(o,l)}),computedSmallerThen:l=>r.computed(()=>{const s=t.value;return n[l]===void 0?(console.warn("useMedia. Unknown breakpoint token"),!1):s<=n[l]}),computedBiggerThen:l=>r.computed(()=>{const s=t.value;return n[l]===void 0?(console.warn("useMedia. Unknown breakpoint token"),!0):s>n[l]})}}const A={trim:e=>typeof e=="string"?e.trim():e,capitalize:e=>typeof e=="string"?e.charAt(0).toUpperCase()+e.slice(1):e,uppercase:e=>typeof e=="string"?e.toUpperCase():e,lowercase:e=>typeof e=="string"?e.toLowerCase():e};function q(e){const n=r.inject(g.MODEL_MODIFIERS_TOKEN,A),o=c=>c,t=Object.keys(e).filter(c=>e[c]).map(c=>n[c]||A[c]||o);return{modify:c=>{let f=c;return t.forEach(l=>{f=l(f)}),f}}}function O(e,n,o,t){return o?P(e,n,t):z(e,n,t)}function P(e,n,o){let t=e;for(;t!==n.parentElement;){if(Math.floor(t.scrollTop)>0&&!o||Math.ceil(t.scrollTop+t.clientHeight)<t.scrollHeight&&o)return!0;if(t.parentElement)t=t.parentElement;else return!1}return!1}function z(e,n,o){let t=e;for(;t!==n.parentElement;){if(Math.floor(t.scrollLeft)>0&&!o||Math.ceil(t.scrollLeft+t.clientWidth)<t.scrollWidth&&o)return!0;if(t.parentElement)t=t.parentElement;else return!1}return!1}function $(e){return!!e&&"nodeType"in e&&e.nodeType===Node.ELEMENT_NODE}function _(e,n=!0){return e===null?null:n&&e.scrollHeight>e.clientHeight||!n&&e.scrollWidth>e.clientWidth?e:_(e.parentElement,n)}function F(e="scroll",n){const o=r.ref(null),t=E(e),i=r.computed(()=>t.value!=="none"),c=r.computed(()=>o.value&&n(o.value)),f=(u,a,h)=>{const{target:d,currentTarget:S,cancelable:D}=u;if(!D||!S||!$(d)||(d==null?void 0:d.type)==="range")return;const p=S;if(t.value==="all"&&(a&&!p.contains(_(d))||!a&&!p.contains(_(d,!1)))){u.preventDefault();return}if(a&&(h&&!O(d,p,!0,!1)||!h&&!O(d,p,!0,!0))){u.preventDefault();return}!a&&(h&&!O(d,p,!1,!1)||!h&&!O(d,p,!1,!0))&&u.preventDefault()},l=u=>{i.value&&f(u,!!u.deltaY,u.deltaY?u.deltaY<0:u.deltaX<0)};let s=0,v=0,m=0,L=0,T;const y=u=>{if(!i.value)return;const a=u.changedTouches[0];m=s-a.clientX,L=v-a.clientY,s=a.clientX,v=a.clientY,T===void 0&&(T=Math.abs(L)>Math.abs(m)),f(u,T,T?L<0:m<0)},w=u=>{const a=c.value;if(!a)return;const h=u.touches[0];s=h.clientX,v=h.clientY,m=0,L=0,T=void 0,a.removeEventListener("touchmove",y),a.addEventListener("touchmove",y,{passive:!1})},R=(u,a,h)=>{h(()=>{u&&(u.removeEventListener("wheel",l),u.removeEventListener("touchstart",w),u.removeEventListener("touchmove",y))}),u&&(u.addEventListener("wheel",l,{passive:!1}),u.addEventListener("touchstart",w,{passive:!0}))};return r.onBeforeUnmount(()=>{const u=c.value;u&&(u.removeEventListener("wheel",l),u.removeEventListener("touchstart",w),u.removeEventListener("touchmove",y))}),r.watch(c,R,{immediate:!0}),r.watch([c,i],([u,a])=>{u&&(u.style.overscrollBehavior=a?"contain":null)},{immediate:!0}),o}const C=Symbol();function V(e="parent",n=document.body){const o=r.inject(C,r.ref("light")),t=r.ref(e==="parent"?o.value:e),i=E(n);r.provide(C,t);const c=l=>{t.value=l},f=([l,s])=>{s==null||s.classList.remove("smed-dark-theme"),s==null||s.classList.remove("smed-light-theme"),s==null||s.classList.add(`smed-${l}-theme`)};return r.watch([t,i],f,{immediate:!0}),{set:c,theme:t}}exports.useAlerts=j;exports.useControlAccess=M;exports.useControlDisabled=B;exports.useControlInvalid=H;exports.useInteractive=U;exports.useMedia=X;exports.useModelModifiers=q;exports.useOverscroll=F;exports.useTheme=V;
